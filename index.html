<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent Tag Finder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    select, button { margin: 10px 0; padding: 10px; }
    .tag-card { border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .tag-title { font-weight: bold; font-size: 1.1em; }
    .copy-btn { margin-top: 5px; cursor: pointer; background-color: #f0f0f0; padding: 5px 10px; border-radius: 5px; border: none; }
  </style>
</head>
<body>

<h2>Agent Tag Finder</h2>
<p>Select a category to view tags and descriptions. Click 'Copy Tag' to copy the tag easily.</p>

<select id="categorySelector">
  <option value="">-- Select Category --</option>
</select>

<div id="tagsContainer"></div>

<script>
  const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTBplCT7ffjwI2rAy_XFMB7yuGjki8nQ0K2KPfzh4XD7K8BYUXG0njg8Y6_cue6dOqd54V3ga-N_zz/pub?output=csv';
  let tagData = [];

  fetch(sheetURL)
    .then(response => response.text())
    .then(csvText => {
      const parsed = Papa.parse(csvText, { header: true });
      tagData = parsed.data;
      populateCategories();
    });

  function populateCategories() {
    const categories = [...new Set(tagData.map(row => row.Category).filter(Boolean))];
    const selector = document.getElementById('categorySelector');
    categories.forEach(category => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      selector.appendChild(option);
    });
  }

  document.getElementById('categorySelector').addEventListener('change', function() {
    const selectedCategory = this.value;
    displayTags(selectedCategory);
  });

  function displayTags(category) {
    const container = document.getElementById('tagsContainer');
    container.innerHTML = '';

    const filtered = tagData.filter(row => row.Category === category);

    filtered.forEach(tag => {
      const card = document.createElement('div');
      card.className = 'tag-card';

      card.innerHTML = `
        <div class="tag-title">${tag.Tag}</div>
        <div>${tag.Description}</div>
        <button class="copy-btn" onclick="copyToClipboard('${tag.Tag}')">Copy Tag</button>
      `;

      container.appendChild(card);
    });
  }

  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => alert('Tag copied: ' + text));
  }
</script>

</body>
</html>
