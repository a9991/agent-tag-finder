<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent Tag Finder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <style>
    body { font-family: 'Helvetica Neue', sans-serif; padding: 20px; background: #f6f6f6; color: #333; }
    h2 { font-size: 2.4rem; margin-bottom: 10px; color: #222; }
    p { font-size: 1.1rem; margin-bottom: 20px; }
    select { margin: 10px 0; padding: 12px; width: 320px; font-size: 1rem; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .tag-card { background: #fff; border-radius: 16px; padding: 20px; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.04); transition: transform 0.2s; }
    .tag-card:hover { transform: translateY(-3px); }
    .tag-title { font-weight: 600; font-size: 1.2em; margin-bottom: 8px; color: #2d2d2d; }
    .copy-btn { margin-top: 10px; cursor: pointer; background-color: #ffce00; color: #000; padding: 8px 14px; border-radius: 6px; border: none; font-size: 0.95rem; transition: background-color 0.2s; }
    .copy-btn:hover { background-color: #ffdb4d; }
    #tagsContainer { margin-top: 30px; }
  </style>
</head>
<body>

<h2>Agent Tag Finder</h2>
<p>Select a group or view all tags at once. Click 'Copy Tag' to copy easily.</p>

<select id="categorySelector">
  <option value="">-- Select Group --</option>
  <option value="ALL_TAGS">View All Tags</option>
</select>

<div id="tagsContainer"></div>

<script>
  const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRxUHKTNNGidfBRrpme1pUvysor1s-jZ27Zk16acjq62djh-ZTTght15r6uzBIlyZdWc55P8Uu8JDma/pub?gid=1849319999&single=true&output=csv';
  let tagData = [];

  fetch(sheetURL)
    .then(response => response.text())
    .then(csvText => {
      const parsed = Papa.parse(csvText, { header: true });
      tagData = parsed.data;
      populateCategories();
    });

  function populateCategories() {
    const categories = [...new Set(tagData.map(row => row.Group).filter(Boolean))];
    const selector = document.getElementById('categorySelector');
    categories.forEach(category => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      selector.appendChild(option);
    });
  }

  document.getElementById('categorySelector').addEventListener('change', function() {
    const selectedCategory = this.value;
    if (selectedCategory === 'ALL_TAGS') {
      displayTags(null, true);
    } else {
      displayTags(selectedCategory);
    }
  });

  function displayTags(category, showAll = false) {
    const container = document.getElementById('tagsContainer');
    container.innerHTML = '';

    const filtered = showAll ? tagData.filter(row => row.Tag && row.Description) : tagData.filter(row => row.Group === category);

    filtered.forEach(tag => {
      const card = document.createElement('div');
      card.className = 'tag-card';

      card.innerHTML = `
        <div class="tag-title">${tag.Tag}</div>
        <div>${tag.Description}</div>
        <button class="copy-btn" onclick="copyToClipboard('${tag.Tag}')">Copy Tag</button>
      `;

      container.appendChild(card);
    });
  }

  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => alert('Tag copied: ' + text));
  }
</script>

</body>
</html>
